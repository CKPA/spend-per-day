<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏Å‡∏µ‡πà‡∏ö‡∏≤‡∏ó</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{ 
  --c1:#0fa2a9; /* teal */
  --c2:#bfe6ff; /* light blue */
  --c3:#fbfaf6; /* off-white */
  --c4:#efe2a2; /* light yellow */
  --c5:#f6a07a; /* peach */
  --brand:var(--c1);
  --accent:var(--c5);
}
    html,body{font-family: 'Prompt', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial, 'Noto Sans Thai', sans-serif;}
    .card{ @apply bg-white rounded-2xl shadow-md p-5 md:p-6; }
    .pill{ @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-sm; }
    .muted{ @apply text-gray-500; }
    .btn{ @apply inline-flex items-center justify-center rounded-xl px-4 py-2 font-medium shadow-sm; }
    .btn-primary{ @apply text-white; background: var(--brand); }
    .btn-ghost{ @apply bg-white border border-gray-200 text-gray-700; }
    .num{ text-align:right; }
    input[type="number"]::-webkit-outer-spin-button,
    input[type="number"]::-webkit-inner-spin-button{ -webkit-appearance: none; margin: 0; }
  </style>
</head>
<body class="min-h-screen bg-[var(--c3)]">
  <header class="sticky top-0 z-10 bg-[var(--c1)] backdrop-blur border-b border-white/30">
    <div class="max-w-5xl mx-auto px-4 py-4 flex flex-col gap-2 md:flex-row md:items-center md:justify-between">
      <h1 class="text-xl md:text-2xl font-semibold text-white">
        üí∏ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì ‚Äú‡πÄ‡∏£‡∏≤‡πÉ‡∏ä‡πâ‡πÄ‡∏á‡∏¥‡∏ô‡πÑ‡∏î‡πâ‡∏ß‡∏±‡∏ô‡∏•‡∏∞‡∏Å‡∏µ‡πà‡∏ö‡∏≤‡∏ó?‚Äù
      </h1>
      <div class="flex gap-2">
        <button id="btnSample" class="btn btn-ghost">‡πÇ‡∏´‡∏•‡∏î‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á</button>
        <button id="btnReset" class="btn btn-ghost">‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</button>
        <button id="btnSave" class="btn btn-primary">‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á</button>
      </div>
    </div>
  </header>

  <main class="max-w-5xl mx-auto px-4 py-6 md:py-10 grid gap-6">
    <!-- ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡πÄ‡∏ö‡∏∑‡πâ‡∏≠‡∏á‡∏ï‡πâ‡∏ô -->
    <section class="card">
      <div class="flex flex-col md:flex-row md:items-center gap-4">
        <div class="grow">
          <label class="block text-sm text-gray-600 mb-1">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
          <input id="incomeMonthly" type="text" inputmode="decimal" class="w-full num rounded-xl border border-gray-200 bg-[var(--c3)] px-4 py-3 focus:outline-none focus:ring-2 focus:ring-violet-300" placeholder="‡πÄ‡∏ä‡πà‡∏ô 20000" />
        </div>
        <div>
          <label class="block text-sm text-gray-600 mb-1">‡∏´‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô</label>
          <div class="flex gap-2">
            <select id="daysSelect" class="rounded-xl border border-gray-200 bg-white px-3 py-3 focus:outline-none focus:ring-2 focus:ring-violet-300">
              <option value="30">30 ‡∏ß‡∏±‡∏ô (‡∏Ñ‡πà‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô)</option>
              <option value="31">31 ‡∏ß‡∏±‡∏ô</option>
              <option value="28">28 ‡∏ß‡∏±‡∏ô</option>
              <option value="custom">‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á‚Ä¶</option>
            </select>
            <input id="daysCustom" type="number" class="w-24 num rounded-xl border border-gray-200 bg-[var(--c3)] px-3 py-3" placeholder="‡∏ß‡∏±‡∏ô" style="display:none" />
          </div>
          <p class="text-xs text-gray-500 mt-1">‡πÉ‡∏ä‡πâ‡∏´‡∏≤‡∏£‡∏ó‡∏±‡πâ‡∏á‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÅ‡∏•‡∏∞‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</p>
        </div>
      </div>
    </section>

    <!-- ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢ -->
    <section class="card">
      <div class="flex items-center justify-between gap-3 mb-3">
        <h2 class="text-lg font-semibold">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</h2>
        <div class="flex gap-2">
          <button id="addRow" class="btn btn-ghost">+ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</button>
        </div>
      </div>
      <div class="overflow-auto">
        <table class="min-w-full text-sm">
          <thead class="text-gray-600">
            <tr>
              <th class="text-left py-2 pr-3">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</th>
              <th class="text-right py-2 pr-3">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢/‡πÄ‡∏î‡∏∑‡∏≠‡∏ô</th>
              <th class="text-center py-2 pr-3">√∑ ‡∏ß‡∏±‡∏ô</th>
              <th class="text-right py-2 pr-3">= ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</th>
              <th class="py-2"></th>
            </tr>
          </thead>
          <tbody id="expenseBody"></tbody>
          <tfoot>
            <tr class="border-t">
              <td class="py-3 font-medium">‡∏£‡∏ß‡∏°‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</td>
              <td></td>
              <td class="text-center">‚Äî</td>
              <td class="py-3 text-right font-semibold" id="sumExpenseDaily">0</td>
              <td></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </section>

    <!-- ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏™‡∏£‡∏∏‡∏õ -->
    <section class="grid md:grid-cols-3 gap-4">
      <div class="card">
        <div class="pill bg-[var(--c2)] text-[#0c7076]">‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</div>
        <p class="mt-2 text-3xl font-semibold" id="incomeDaily">0</p>
        <p class="mt-1 muted text-sm">= ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô √∑ ‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏ß‡∏±‡∏ô</p>
      </div>
      <div class="card">
        <div class="pill bg-[var(--c4)] text-[#7a6b23]">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</div>
        <p class="mt-2 text-3xl font-semibold" id="expenseDaily">0</p>
        <p class="mt-1 muted text-sm">‡∏£‡∏ß‡∏°‡∏à‡∏≤‡∏Å‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏î‡πâ‡∏≤‡∏ô‡∏ö‡∏ô</p>
      </div>
      <div class="card">
        <div class="pill" style="background:#fde6d7;color:#c75e2a">‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</div>
        <p class="mt-2 text-4xl font-bold" id="leftDaily">0</p>
        <p class="mt-1 muted text-sm">= ‡∏£‡∏≤‡∏¢‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô ‚àí ‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô</p>
      </div>
    </section>

    <section class="card">
      <h3 class="font-semibold mb-2">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏´‡∏ï‡∏∏</h3>
      <ul class="list-disc pl-6 text-sm text-gray-600 space-y-1">
        <li>‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡∏Ñ‡∏∑‡∏≠ ‚Äú‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡πà‡∏≠‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‚Äù ‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤ ‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡πÑ‡∏ü ‡∏Ñ‡πà‡∏≤‡∏á‡∏ß‡∏î‡∏£‡∏ñ ‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô ‡∏Ø‡∏•‡∏Ø (‡∏¢‡∏±‡∏á <b>‡πÑ‡∏°‡πà‡∏£‡∏ß‡∏°</b> ‡∏Ñ‡πà‡∏≤‡∏≠‡∏≤‡∏´‡∏≤‡∏£/‡∏ä‡πâ‡∏≠‡∏õ/‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß)</li>
        <li>‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå ‚Äú‡πÄ‡∏á‡∏¥‡∏ô‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡∏ï‡πà‡∏≠‡∏ß‡∏±‡∏ô‚Äù ‡∏Ñ‡∏∑‡∏≠‡∏ß‡∏á‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏¥‡∏ô/‡∏ä‡πâ‡∏≠‡∏õ/‡πÄ‡∏ó‡∏µ‡πà‡∏¢‡∏ß/‡πÄ‡∏Å‡πá‡∏ö‡∏≠‡∏≠‡∏° ‡πÉ‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏ß‡∏±‡∏ô</li>
        <li>‡∏õ‡∏∏‡πà‡∏° ‚Äú‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‚Äù ‡∏à‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á‡πÉ‡∏ô‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå (LocalStorage) ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ</li>
      </ul>
    </section>

    <footer class="py-6 text-center text-xs text-gray-500">‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ ‚ù§Ô∏è ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡πà‡∏ß‡∏¢‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ß‡∏±‡∏ô</footer>
  </main>

<script>
  // ===== Utilities =====
  const baht = (n) => (isFinite(n)? n:0).toLocaleString('th-TH', {maximumFractionDigits:0});
  const getDays = () => {
    const sel = document.getElementById('daysSelect').value;
    if(sel === 'custom'){
      const v = parseInt(document.getElementById('daysCustom').value || '0', 10);
      return isFinite(v) && v>0 ? v : 30;
    }
    return parseInt(sel, 10);
  }
  // --- Money helpers ---
  const parseMoney = (s)=>{ const str = String(s||''); const cleaned = str.replace(/,/g,'').replace(new RegExp('[^0-9\.]','g'),''); return parseFloat(cleaned)||0; };
  function bindMoneyInput(el){
    const formatNow = ()=>{
      const raw = String(el.value||'').replace(/[^0-9]/g,'');
      if(raw===''){ el.value=''; compute(); return; }
      const num = parseInt(raw,10);
      el.value = isFinite(num) ? num.toLocaleString('th-TH') : '';
      try{ el.selectionStart = el.selectionEnd = el.value.length; }catch(e){}
      compute();
    };
    el.addEventListener('input', formatNow);
    el.addEventListener('blur', formatNow);
    el.addEventListener('focus', ()=> el.select());
  }

  // ===== Expenses table =====
  const body = document.getElementById('expenseBody');
  function addRow(data={name:'', monthly:''}){
    const tr = document.createElement('tr');
    tr.className = 'border-t';
    const monthlyStr = (data.monthly!==undefined && data.monthly!==null && data.monthly!=='')
      ? (parseMoney(data.monthly)).toLocaleString('th-TH')
      : '';
    tr.innerHTML = `
      <td class="py-2 pr-3">
        <input class="w-full rounded-lg border border-gray-200 bg-white px-3 py-2" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤" value="${data.name||''}">
      </td>
      <td class="py-2 pr-3 text-right">
        <input class="num w-full rounded-lg border border-gray-200 bg-white px-3 py-2" type="text" inputmode="numeric" placeholder="0" value="${monthlyStr}">
      </td>
      <td class="py-2 pr-3 text-center days">${getDays()}</td>
      <td class="py-2 pr-3 text-right daily">0</td>
      <td class="py-2">
        <button class="btn btn-ghost text-sm" title="‡∏•‡∏ö" aria-label="‡∏•‡∏ö">‚ùå</button>
      </td>`;
    body.appendChild(tr);
    const moneyInput = tr.querySelector('td:nth-child(2) input');
    bindMoneyInput(moneyInput);
    tr.querySelectorAll('td:first-child input').forEach(i=> i.addEventListener('input', compute));
    tr.querySelector('button').addEventListener('click', ()=>{ tr.remove(); compute();});
    compute();
  }

  document.getElementById('addRow').addEventListener('click', ()=> addRow());

  // ===== Compute =====
  function compute(){
    const days = getDays();
    // update days column
    body.querySelectorAll('.days').forEach(td=> td.textContent = days);

    // income daily
    const incomeMonthly = parseMoney(document.getElementById('incomeMonthly').value);
    const incomeDaily = incomeMonthly / (days || 30);
    document.getElementById('incomeDaily').textContent = baht(incomeDaily);

    // each row daily + total
    let sumDaily = 0;
    [...body.querySelectorAll('tr')].forEach(tr=>{
      const m = parseMoney(tr.querySelector('td:nth-child(2) input').value);
      const d = m / (days || 30);
      tr.querySelector('.daily').textContent = baht(d);
      sumDaily += d;
    });
    document.getElementById('sumExpenseDaily').textContent = baht(sumDaily);

    // summary
    document.getElementById('expenseDaily').textContent = baht(sumDaily);
    document.getElementById('leftDaily').textContent = baht(incomeDaily - sumDaily);
  }

  // Inputs that trigger compute
  const incomeEl = document.getElementById('incomeMonthly');
  bindMoneyInput(incomeEl);
  document.getElementById('daysSelect').addEventListener('change', ()=>{
    const isCustom = document.getElementById('daysSelect').value === 'custom';
    document.getElementById('daysCustom').style.display = isCustom ? 'block' : 'none';
    compute();
  });
  document.getElementById('daysCustom').addEventListener('input', compute);

  // ===== Sample & Reset =====
  document.getElementById('btnSample').addEventListener('click', ()=>{
    document.getElementById('incomeMonthly').value = (20000).toLocaleString('th-TH');
    body.innerHTML = '';
    const preset = [
      {name:'‡∏Ñ‡πà‡∏≤‡πÄ‡∏ä‡πà‡∏≤', monthly:3000},
      {name:'‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥/‡∏Ñ‡πà‡∏≤‡πÑ‡∏ü', monthly:1000},
      {name:'‡∏Ñ‡πà‡∏≤‡∏á‡∏ß‡∏î‡∏£‡∏ñ', monthly:5000},
      {name:'‡∏Ñ‡πà‡∏≤‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏£‡∏ñ', monthly:1000},
      {name:'‡∏Ñ‡πà‡∏≤‡∏õ‡∏£‡∏∞‡∏Å‡∏±‡∏ô', monthly:600},
    ];
    preset.forEach(addRow);
    document.getElementById('daysSelect').value = '30';
    document.getElementById('daysCustom').value = '';
    document.getElementById('daysCustom').style.display = 'none';
    compute();
  });

  document.getElementById('btnReset').addEventListener('click', ()=>{
    if(confirm('‡∏•‡πâ‡∏≤‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î?')){
      document.getElementById('incomeMonthly').value = '';
      body.innerHTML = '';
      document.getElementById('daysSelect').value = '30';
      document.getElementById('daysCustom').value = '';
      document.getElementById('daysCustom').style.display = 'none';
      compute();
      localStorage.removeItem('dailyBudgetCalc');
    }
  });

  // ===== Save / Load (LocalStorage) =====
  function snapshot(){
    const rows = [...body.querySelectorAll('tr')].map(tr=>({
      name: tr.querySelector('td:first-child input').value,
      monthly: tr.querySelector('td:nth-child(2) input').value
    }));
    return {
      incomeMonthly: document.getElementById('incomeMonthly').value,
      daysSel: document.getElementById('daysSelect').value,
      daysCustom: document.getElementById('daysCustom').value,
      rows
    };
  }

  function loadSnap(s){
    if(!s) return;
    document.getElementById('incomeMonthly').value = s.incomeMonthly || '';
    document.getElementById('daysSelect').value = s.daysSel || '30';
    document.getElementById('daysCustom').value = s.daysCustom || '';
    document.getElementById('daysCustom').style.display = (s.daysSel==='custom') ? 'block' : 'none';
    body.innerHTML = '';
    (s.rows||[]).forEach(addRow);
    compute();
  }

  document.getElementById('btnSave').addEventListener('click', ()=>{
    localStorage.setItem('dailyBudgetCalc', JSON.stringify(snapshot()));
    compute();
    alert('‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏ô‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏ô‡∏µ‡πâ');
  });

  // Auto-load if exists
  try{ loadSnap(JSON.parse(localStorage.getItem('dailyBudgetCalc'))); }catch(e){}

  // ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏ñ‡∏ß‡∏ß‡πà‡∏≤‡∏á 3 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
  if(body.children.length===0){ addRow(); addRow(); addRow(); }
  compute();
</script>
</body>
</html>
